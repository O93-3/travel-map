html,body{margin:0;height:100%}
#map{width:100%;height:100%}

#ui{
 position:fixed;top:10px;left:10px;z-index:1000;
 background:rgba(0,0,0,.75);color:#fff;
 padding:10px;border-radius:8px
}
select,button,input{width:180px;margin:2px 0}

#currentLocation{
 position:fixed;top:15px;left:50%;
 transform:translateX(-50%);
 background:#000;color:#fff;
 padding:8px 14px;border-radius:6px;
 font-size:18px;display:flex;gap:8px;
 cursor:move;z-index:1100
}
#currentLocation img{width:32px;height:20px}

.streaming #ui{display:none}

.pulsate div{animation:pulse 1.5s infinite}
@keyframes pulse{
 0%{transform:scale(1);opacity:1}
 50%{transform:scale(1.5);opacity:.7}
 100%{transform:scale(1);opacity:1}
}


/* ===== UI: 標準幅 500px（追記で上書き） ===== */
#ui{
  width: 200px;
  max-width: 200px;
  box-sizing: border-box; /* padding込みで500pxにする */
}

/* パネル幅に合わせて各コントロールを伸ばす
   ※現状は select,button,input が width:180px なのでそれを上書きする [1](blob:https://m365.cloud.microsoft/1a26e45b-36b5-4b0f-b876-7ad9422abe81) */
#ui select,
#ui button,
#ui input[type="range"]{
  width: 100% !important;
  box-sizing: border-box;
}

/* カラーピッカーは横幅いっぱいにすると見づらい場合があるので控えめ */
#ui input[type="color"]{
  width: 80px !important;
  height: 30px;
  padding: 0;
}

/* チェックボックスは幅固定の影響を受けないようにする（離れる問題の根本対策） */
#ui input[type="checkbox"]{
  width: auto !important;
  margin: 0;
}


/* UI全体の基準文字サイズ */
#ui{
  font-size: 14px; /* 好きなサイズに */
}

/* ===============================
   現在地テロップ（都市だけ太字・大きく + 見た目強化）
   =============================== */
#currentLocation{
  background: rgba(0,0,0,0.72);
  border: 1px solid rgba(255,255,255,0.15);
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border-radius: 14px;
}

#flag{
  border-radius: 4px;
  object-fit: cover;
  flex: 0 0 auto;
}

#currentText{
  display: flex;
  flex-direction: column;
  line-height: 1.05;
  white-space: normal;
}

#currentCountry{
  display: block;
  font-size: 0.75em;
  font-weight: 600;
  opacity: 0.9;
}

#currentCity{
  display: block;
  font-size: 1.25em;
  font-weight: 800;
  letter-spacing: 0.02em;
  margin-top: 1px;
}

/* 配信モード：UIを消す（JSは body に streaming を付ける） */
.streaming #ui{display:none;}

/* ===== 都市検索 ===== */
.searchWrap{ position:relative; }
#citySearch{ width:100% !important; box-sizing:border-box; height:34px; padding:6px 10px; border-radius:10px; border:1px solid rgba(255,255,255,0.12); background: rgba(0,0,0,0.35); color:#fff; outline:none; }
#citySearch::placeholder{ color: rgba(255,255,255,0.65); }

#cityResults.city-results{
  position:absolute;
  left:0;
  right:0;
  top:38px;
  z-index:1300;
  display:none;
  max-height:240px;
  overflow:auto;
  background: rgba(10,10,10,0.92);
  border:1px solid rgba(255,255,255,0.14);
  border-radius:12px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.45);
}
#cityResults.city-results.open{ display:block; }

.city-item{ padding:8px 10px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.06); }
.city-item:last-child{ border-bottom:none; }
.city-item:hover{ background: rgba(255,255,255,0.08); }
.city-item .main{ font-weight:800; }
.city-item .sub{ font-size:12px; opacity:0.85; margin-top:2px; }

.city-results::-webkit-scrollbar{ width:10px; }
.city-results::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.18); border-radius:10px; }



/* 検索候補：キーボード選択ハイライト */
.city-item.active{
  background: rgba(0, 140, 255, 0.22);
  outline: 1px solid rgba(0, 140, 255, 0.35);
}


/* ===== 見た目：色設定を1項目ずつ別段（縦並び）にする ===== */
#ui label.col{
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 8px 0;
}
#ui label.col > span{
  display: block;
}
/* カラーピッカーは左寄せのまま */
#ui label.col input[type="color"]{
  align-self: flex-start;
}


/* ===== UI: スクロール＋折り畳み（details/summary） ===== */

/* メニュー（#ui）が画面外に伸びたら、#ui内だけスクロールさせる */
#ui{
  max-height: calc(100dvh - 20px); /* top:10px を考慮 */
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* スクロールバー（WebKit系） */
#ui::-webkit-scrollbar{ width: 10px; }
#ui::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.18); border-radius: 10px; }

/* 折り畳みセクション：ui-group を <details> 化 */
#ui details.ui-group{
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  padding: 8px 10px;
  margin: 10px 0;
  background: rgba(0,0,0,0.18);
}

#ui details.ui-group > summary.ui-title{
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 800;
  list-style: none; /* 既定のマーカーを消す */
}

/* 既定の三角（Chrome等）を消す */
#ui details.ui-group > summary.ui-title::-webkit-details-marker{ display:none; }

/* 自前の三角アイコン */
#ui details.ui-group > summary.ui-title::before{
  content: "▸";
  display: inline-block;
  opacity: .85;
  transform: translateY(-1px);
  transition: transform .15s ease;
}
#ui details.ui-group[open] > summary.ui-title::before{
  transform: rotate(90deg) translateX(1px);
}

/* 開いているときだけ中身に余白 */
#ui details.ui-group[open] > :not(summary){
  margin-top: 10px;
}
