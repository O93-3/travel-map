<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Overlay Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./vendor/leaflet/leaflet.css">
  <link rel="stylesheet" href="./style.themes.css">
  <style>
    html,body{width:480px;height:255px;margin:0;padding:0;overflow:hidden;background:#00ff00;}
    #frame{width:480px;height:255px;box-sizing:border-box;padding:4px;position:relative;}
    #miniMap{
      width:100%;height:100%;box-sizing:border-box;
      border-radius:18px;overflow:hidden;
      background:#0a0c12;
      border:1px solid rgba(255,255,255,.16);
      box-shadow:0 18px 44px rgba(0,0,0,.52);
      position:relative;
    }

    #mapError{
      position:absolute;
      inset:8px;
      border-radius:14px;
      background:#000;
      border:1px solid rgba(255,255,255,.18);
      color:rgba(255,255,255,.95);
      display:none;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:14px;
      font-size:13px;
      font-weight:900;
      letter-spacing:.02em;
      z-index:600;
      backdrop-filter: blur(6px);
    }

    @keyframes tmStarPulse {
      0%   { transform:translate(-50%,-50%) scale(0.92); opacity:0.88; }
      45%  { transform:translate(-50%,-50%) scale(1.12); opacity:1.0; }
      100% { transform:translate(-50%,-50%) scale(0.92); opacity:0.88; }
    }
    @keyframes tmRingPulse {
      0%   { transform:translate(-50%,-50%) scale(0.85); opacity:0.00; }
      35%  { opacity:0.45; }
      100% { transform:translate(-50%,-50%) scale(1.55); opacity:0.00; }
    }
    .tmStarWrap{ position:relative; width:30px; height:30px; }
    .tmStarWrap .tmRing{
      position:absolute;
      left:50%; top:50%;
      width:34px; height:34px;
      border-radius:999px;
      border:2px solid rgba(255,176,32,.55);
      box-shadow:0 0 22px rgba(255,176,32,.20);
      animation: tmRingPulse 1.25s ease-out infinite;
      pointer-events:none;
    }
    .tmStarWrap .tmStar{
      position:absolute;
      left:50%; top:50%;
      animation: tmStarPulse 1.25s ease-in-out infinite;
      filter:drop-shadow(0 10px 18px rgba(0,0,0,.45)) drop-shadow(0 0 16px rgba(255,176,32,.22));
      will-change:transform,opacity;
    }

    .leaflet-tooltip, .leaflet-tooltip *{
      -webkit-writing-mode: horizontal-tb !important;
      writing-mode: horizontal-tb !important;
      text-orientation: mixed !important;
      text-combine-upright: none !important;
    }

    .leaflet-tooltip.ovMapLabel{
      background: rgba(0,0,0,.82);
      border: 1px solid rgba(255,255,255,.26);
      color:#fff;
      padding:6px 10px;
      border-radius:12px;
      box-shadow:0 10px 22px rgba(0,0,0,.45);
      font-size:16px; /* 90% */
      font-weight:1050;
      letter-spacing:.02em;
      white-space: pre;
      line-height: 1.06;
      text-align:center;
      pointer-events:none;
      text-shadow:0 2px 10px rgba(0,0,0,.70);
    }
    .leaflet-tooltip.ovMapLabel:before{display:none;}
    .leaflet-tooltip.ovMapLabel.sm{font-size:14px;}
    .leaflet-tooltip.ovMapLabel.xs{font-size:13px;}

    .leaflet-tile{filter:grayscale(1) contrast(1.06) brightness(1.03);}
  </style>
</head>
<body data-theme="neon">
  <div id="frame">
    <div id="miniMap"></div>
    <div id="mapError">地図の初期化に失敗しました。<br>（OBSのブラウザ/通信/コンソールを確認）</div>
  </div>

  <script src="./vendor/leaflet/leaflet.js"></script>
  <script src="./js/overlay-map.js"></script>
</body>
</html>
